#:import random random

<AbilityScoreLabel@Label>
    source: None
    font_size: '24sp'
    text_size: self.size
    size: self.size
    height: '40sp'
    margin: 5, 5
    size_hint: 1, None
    halign: 'right'
    valign: 'middle'
    padding: -5, 0


<AbilityScore@AbilityScoreLabel>
    halign: 'center'
    markup: True
    bold: True
    padding: 0, 0
    canvas.before:
        Color:
            rgba: .1, .1, .1, 0.7
        Rectangle:
            pos: self.pos
            size: self.size


<SubGridLayout>:
    size_hint: 1, None
    cols: 1
    spacing: [0,5]
    ch_calc: self.children[-1].height if len(self.children) > 0 else 0
    h_calc: (self.ch_calc+self.spacing[1])
    row_calc: (len(self.children)/self.cols) if len(self.children) > 0 else 0
    height: self.h_calc*self.row_calc


<StatsTab>:
    text:   "Statistics"
    GridLayout:
        cols: 1
        padding: 5
        spacing: 10
        AbilityScore:
            text: root.uic.name
            halign: 'center'
        ###############
        # Attributes
        ###############
        SubGridLayout:
            cols: 4
            AbilityScoreLabel:
                text: "Str:"
            AbilityScore:
                text: "%s (%+d)" % (root.uic.str_score, int(root.uic.str))
            AbilityScoreLabel:
                text: "Int:"
            AbilityScore:
                text: "%s (%+d)" % (root.uic.int_score, int(root.uic.int))
            AbilityScoreLabel:
                text: "Dex:"
            AbilityScore:
                text: "%s (%+d)" % (root.uic.dex_score, int(root.uic.dex))
            AbilityScoreLabel:
                text: "Wis:"
            AbilityScore:
                text: "%s (%+d)" % (root.uic.wis_score, int(root.uic.wis))
            AbilityScoreLabel:
                text: "Con:"
            AbilityScore:
                text: "%s (%+d)" % (root.uic.con_score, int(root.uic.con))
            AbilityScoreLabel:
                text: "Cha:"
            AbilityScore:
                text: "%s (%+d)" % (root.uic.cha_score, int(root.uic.cha))
        ###############
        # Saves
        ###############
        SubGridLayout:
            cols: 6
            AbilityScoreLabel:
                text: "Fort:"
            AbilityScore:
                text: "%+d" % int(root.uic.fort)
            AbilityScoreLabel:
                text: "Ref:"
            AbilityScore:
                text: "%+d" % int(root.uic.ref)
            AbilityScoreLabel:
                text: "Will:"
            AbilityScore:
                text: "%+d" % int(root.uic.will)
        ###############
        # AC
        ###############
        SubGridLayout:
            cols: 4
            AbilityScoreLabel:
                text: "AC:"
            AbilityScore:
                text: root.uic.AC
            AbilityScoreLabel:
                text: "ACP:"
            AbilityScore:
                text: "%+d" % int(root.uic.ACP)
            AbilityScoreLabel:
                text: "Tch AC:"
            AbilityScore:
                text: root.uic.touch_AC
            AbilityScoreLabel:
                text: "Flat AC:"
            AbilityScore:
                text: root.uic.flatfooted_AC

#        Button:
#            text: 'Str Boost'
#            on_press: root.test_button_press()


<AttacksTab>:
    text:   "Attacks/Buffs"
    BoxLayout:
        orientation: 'vertical'
        spacing: 5
        Label:
            text: "Buffs:"
            size_hint: 1, None
            height: 20
            padding: [0, 5]
        ScrollView:
            size_hint: 1, .66
            #size: 500, 1320
            pos_hint: {'center_x': .5, 'center_y': .5}
            do_scroll_x: False
            GridLayout:
                cols: 1
                size_hint: 1, None
                spacing: 10
                padding: [10, 0, 10, 10]    # Top is 0
                id: buffs
                Label:
                    text: "Buffs"
        Label:
            text: "Attacks:"
            size_hint: 1, None
            height: 20
        ScrollView:
            size_hint: 1, .33
            #size: 500, 1320
            pos_hint: {'center_x': .5, 'center_y': .5}
            do_scroll_x: False
            GridLayout:
                cols: 1
                size_hint: 1, None
                spacing: 5
                padding: 10
                id: attacks
                Label:
                    text: "Attacks"

<AttackRow>:
    orientation: 'horizontal'
    padding: 5
    size_hint: 1, None
    height: 50
    Label:
        id: name
        size_hint: .5, 1
        halign: 'left'
    Label:
        id: atk
        size_hint: .1, 1
    Label:
        id: dmg
        size_hint: .2, 1
    Button:
        text: "Roll"
        size_hint: .2, 1
        on_press: root.show_roll()


<CountersTab>:
    text: "Counters"
    Label:
        text: "Counters will be displayed here"

<SkillsTab>:
    text: "Skills"
    Label:
        text: "Skills will be displayed here"

<FeatsTab>:
    text: "Feats"
    Label:
        text: "Feats will be displayed here"

<SpellsTab>:
    text: "Spells"
    Label:
        text: "Spells will be displayed here"